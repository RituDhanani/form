<!doctype html>
<html lang="en">    
<head>
    <meta charset="utf-8">
    <title>page1</title>
</head>
<body>

<form id="userForm">
    <h1> Fill this Form</h1>

    <label for="name">Name:</label>
    <input type="text" id="name" name="name" required>
    <br><br>

    <label for="email">EmailId:</label>.  
    <input type="email" id="email" name="email" required>
    <br><br>

    <label for="gender">Gender:</label>
    <input type="radio" id="male" name="gender" value="male">
    <label for="male">Male</label>
    <input type="radio" id="female" name="gender" value="female">
    <label for="female">Female</label>
    <br><br>    

    <label for="hobbies">Hobbies:</label>
    <input type="checkbox" id="reading" name="hobbies" value="reading">
    <label for="reading">Reading</label>
    <input type="checkbox" id="travelling" name="hobbies" value="travelling">
    <label for="travelling">Travelling</label>
    <input type="checkbox" id="drawing" name="hobbies" value="drawing">
    <label for="drawing">Drawing</label>
    <input type="checkbox" id="writing" name="hobbies" value="writing">
    <label for="writing">Writing</label>
    <br><br>

    <label for="age">Age:</label>
    <input type="number" id="age" name="age" min="1" max="100">
    <br><br>

    <label>Country:</label>
    <select id="country" required>
        <option value="">Select Country</option>
    </select>
    <br><br>

    <label>State:</label>
    <select id="state" required>
        <option value="">Select State</option>
    </select>
    <br><br>

    <label>City:</label>
    <select id="city" required>
        <option value="">Select City</option>
    </select>
    <br><br>

    <input type="submit" id="submitBtn" value="Submit">
    <button type="button" id="cancelBtn" style="display:none;">Cancel</button>
</form>

<hr>

<h2>Table</h2>

<table id="dataTable">
    <style>
        table {
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
        }
    </style>
    <thead>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Gender</th>
            <th>Hobbies</th>
            <th>Age</th>
            <th>Country</th>
            <th>State</th>
            <th>City</th>
            <th>time</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody id="tableBody"></tbody>
</table>

<script>
    const countryStateCityData = {
        India: {
            Gujarat: ["Surat", "Ahmedabad", "Vadodara"],
            Maharashtra: ["Mumbai", "Pune", "Nagpur"],
            Karnataka: ["Bangalore", "Mysore", "Mangalore"]
        },
        USA: {
            California: ["Los Angeles", "San Francisco", "San Diego"],
            Texas: ["Houston", "Dallas", "Austin"],
            Florida: ["Miami", "Orlando", "Tampa"]
        }
    };
    const countrySelect = document.getElementById("country");
    const stateSelect = document.getElementById("state");
    const citySelect = document.getElementById("city");
    for (const country in countryStateCityData) {
        countrySelect.add(new Option(country, country));
    }
    countrySelect.addEventListener("change", function () {
    stateSelect.innerHTML = '<option value="">Select State</option>';
    citySelect.innerHTML = '<option value="">Select City</option>';
    if (this.value) {
        for (let state in countryStateCityData[this.value]) {
            stateSelect.add(new Option(state, state));
        }
    }
});

stateSelect.addEventListener("change", function () {
    citySelect.innerHTML = '<option value="">Select City</option>';
     if (this.value) {
        countryStateCityData[countrySelect.value][this.value].forEach(city => citySelect.add(new Option(city, city)));
    }
});

    const userData = [
        {
            name: "Ritu",
            email: "ritu@gmail.com",
            gender: "female",
            hobbies: "reading, travelling",
            age: 25,
            country: "India",
            state: "Gujarat",
            city: "Surat",
            Time: "5:10:30"
        },
        {
            name: "khushi",
            email: "khushi@gmail.com",
            gender: "female",
            hobbies: "drawing, writing",
            age: 28,
            country: "India",
            state: "Maharashtra",
            city: "Mumbai",
            Time: "13:11:00 "
        }
    ];

    let editIndex = null;
    const tableBody = document.getElementById("tableBody");

    function renderTable() {
        tableBody.innerHTML = "";
        userData.forEach(user => {
            const row = `
                <tr>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${user.gender}</td>
                    <td>${user.hobbies}</td>
                    <td>${user.age}</td>
                    <td>${user.country}</td>
                    <td>${user.state}</td>
                    <td>${user.city}</td>
                    <td>${user.Time}</td>
                    <td>
                        <button onclick="editUser(${userData.indexOf(user)})">Edit</button>
                        <button onclick="deleteUser(${userData.indexOf(user)})">Delete</button>
                    </td>
                </tr>`;
            tableBody.innerHTML += row;
        });
    }
    renderTable();

    window.onload = renderTable;
    document.getElementById("userForm").addEventListener("submit", function(e) {
        e.preventDefault();

        const hobbies = Array.from(
            document.querySelectorAll('input[name="hobbies"]:checked')
        ).map(h => h.value).join(", ");

        const newUser = {
            name: document.getElementById("name").value,
            email: document.getElementById("email").value,
            gender: document.querySelector('input[name="gender"]:checked')?.value || "",
            hobbies: hobbies,
            age: document.getElementById("age").value,
            country: document.getElementById("country").value,
            state: document.getElementById("state").value,
            city: document.getElementById("city").value,
            Time: new Date().toLocaleTimeString()
        };
        if (editIndex !== null) {
            userData[editIndex] = newUser;
            editIndex = null;
            document.getElementById("submitBtn").value = "Submit";
            document.getElementById("cancelBtn").style.display = "none";
        } else {
            userData.push(newUser);
        }
        renderTable();
        this.reset();
    });
    function editUser(index) {
        const user = userData[index];
        editIndex = index;

        document.getElementById("name").value = user.name;
        document.getElementById("email").value = user.email;
        document.getElementById("age").value = user.age;
        document.getElementById("country").value = user.country;
        countrySelect.dispatchEvent(new Event('change'));
        document.getElementById("state").value = user.state;
        stateSelect.dispatchEvent(new Event('change'));
        document.getElementById("city").value = user.city;

        document.querySelector(`input[name="gender"][value="${user.gender}"]`).checked = true;  
        document.querySelectorAll('input[name="hobbies"]').forEach(h => {
            h.checked = user.hobbies.includes(h.value);
        });
        document.getElementById("submitBtn").value = "Update";
        document.getElementById("cancelBtn").style.display = "inline";
    }
    function deleteUser(index) {
        userData.splice(index, 1);
        renderTable();
    }
    document.getElementById("cancelBtn").addEventListener("click", function() {
        document.getElementById("userForm").reset();
        editIndex = null;
        document.getElementById("submitBtn").value = "Submit";
        this.style.display = "none";
    });

</script>
</body>
</html> 



